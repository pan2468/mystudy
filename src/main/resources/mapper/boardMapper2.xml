<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myspring.lim101.BoardMapper2">

    <insert id="insertBoard">
       insert into board (NUM,PASS,NAME,EMAIL,TITLE,CONTENT,READCOUNT,WRITEDATE)
        values (
        #{num},
        #{pass},
        #{name},
        #{email},
        #{title},
        #{content},
        0,
        sysdate
        )
        <selectKey keyProperty="num" resultType="int" order="BEFORE">
            select nvl(num,0) + 1 from board
        </selectKey>
    </insert>
    <update id="updateBoard">
      update board set
        PASS   = #{pass},
        NAME   = #{name},
        EMAIL   = #{email},
        TITLE   = #{title},
        CONTENT   = #{content},
        READCOUNT   = READCOUNT + 1
        where num=#{num}

    </update>
    <delete id="deleteBoard">
        delete from board where num=#{num}
    </delete>


    <select id="selectBoard" resultType="com.myspring.lim101.utils.PubMap">
        select NUM,PASS,NAME,EMAIL,TITLE,CONTENT,READCOUNT,WRITEDATE
        from board
    </select>
    <select id="selectBoardByNum" resultType="com.myspring.lim101.utils.PubMap">
        select NUM,PASS,NAME,EMAIL,TITLE,CONTENT,READCOUNT,WRITEDATE
        from board
        where num=#{num}
    </select>
</mapper>
